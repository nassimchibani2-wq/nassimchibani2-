<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My App - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</title>
    <style>
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø®Ø·ÙˆØ· */
        :root { --fb-blue: #3b5998; --fb-bg: #e9ebee; }
        body { font-family: tahoma, arial, sans-serif; background-color: var(--fb-bg); margin: 0; direction: rtl; padding-bottom: 60px; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header { background-color: var(--fb-blue); color: white; padding: 12px; font-weight: bold; position: sticky; top: 0; z-index: 1000; display: flex; justify-content: space-between; }
        
        /* ÙˆØ§Ø¬Ù‡Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #loginOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--fb-blue); z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; }
        .login-input { padding: 12px; margin: 10px; border-radius: 8px; border: none; width: 85%; max-width: 300px; }
        .login-btn { background: #42b72a; color: white; border: none; padding: 12px 50px; border-radius: 8px; font-weight: bold; cursor: pointer; }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .container { display: flex; flex-direction: column; align-items: center; padding: 15px; }
        .section { width: 100%; max-width: 500px; display: none; }
        .section.active { display: block; }

        /* ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ù†Ø´Ø± ÙˆØ§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª */
        .card { background: white; border: 1px solid #dddfe2; border-radius: 8px; padding: 12px; margin-bottom: 15px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
        textarea { width: 100%; border: 1px solid #eee; padding: 10px; resize: none; outline: none; border-radius: 5px; }
        .btn-post { background: var(--fb-blue); color: white; border: none; padding: 8px 20px; border-radius: 5px; font-weight: bold; margin-top: 10px; float: left; }
        
        /* Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© */
        .chat-box { background: white; border: 1px solid #ddd; height: 350px; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; border-radius: 8px; }
        .msg { padding: 10px 15px; border-radius: 18px; max-width: 75%; font-size: 14px; line-height: 1.4; position: relative; }
        .msg.sent { background: #0084ff; color: white; align-self: flex-start; }
        .msg.received { background: #e4e6eb; color: black; align-self: flex-end; }
        .msg-user { font-size: 10px; font-weight: bold; margin-bottom: 3px; display: block; opacity: 0.8; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø³ÙÙ„ÙŠ */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; border-top: 1px solid #ddd; height: 55px; z-index: 1000; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 11px; color: #606770; cursor: pointer; }
        .nav-item.active { color: var(--fb-blue); font-weight: bold; }
        
        video, img { width: 100%; border-radius: 5px; margin-top: 8px; }
    </style>
</head>
<body>

<div id="loginOverlay">
    <h2 style="margin-bottom: 20px;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ My App</h2>
    <input type="text" id="usernameInput" class="login-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§...">
    <input type="password" id="passwordInput" class="login-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± (1234)">
    <button class="login-btn" onclick="login()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†</button>
    <p id="loginError" style="color: #ffb3b3; margin-top: 15px; font-size: 13px;"></p>
</div>

<div class="header">
    <span>My App</span>
    <span id="userNameHeader" style="font-size: 12px; opacity: 0.9;"></span>
</div>

<div class="container">
    <div id="posts-sec" class="section active">
        <div class="card">
            <textarea id="postTxt" placeholder="Ø¨Ù…Ø§Ø°Ø§ ØªÙÙƒØ±ØŸ" rows="3"></textarea>
            <input type="file" id="postImg" accept="image/*" style="font-size: 11px; margin-top: 5px;">
            <button class="btn-post" onclick="addPost()">Ù†Ø´Ø±</button>
            <div style="clear:both;"></div>
        </div>
        <div id="wall"></div>
    </div>

    <div id="videos-sec" class="section">
        <div class="card">
            <p style="margin: 0 0 10px 0; font-size: 14px;">Ø§Ù†Ø´Ø± ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ù‡Ø§ØªÙÙƒ:</p>
            <input type="file" id="vidInput" accept="video/*">
            <button class="btn-post" onclick="addVideo()">Ù†Ø´Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
            <div style="clear:both;"></div>
        </div>
        <div id="video-feed"></div>
    </div>

    <div id="chat-sec" class="section">
        <div class="chat-box" id="groupChatBox"></div>
        <div style="display:flex; margin-top:10px; gap:8px;">
            <input type="text" id="groupChatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©..." style="flex:1; padding:12px; border:1px solid #ddd; border-radius: 25px; outline: none;">
            <button onclick="sendGroupMessage()" style="background:var(--fb-blue); color:white; border:none; width:45px; height:45px; border-radius: 50%; font-size: 18px;">â—€</button>
        </div>
    </div>
</div>

<div class="bottom-nav">
    <div class="nav-item active" id="nav-posts" onclick="showSec('posts-sec', this)">ğŸ <br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    <div class="nav-item" id="nav-videos" onclick="showSec('videos-sec', this)">ğŸ“º<br>ÙÙŠØ¯ÙŠÙˆ</div>
    <div class="nav-item" id="nav-chat" onclick="showSec('chat-sec', this)">ğŸ’¬<br>Ø¯Ø±Ø¯Ø´Ø©</div>
</div>

<script>
    // Ù…ØµÙÙˆÙØ© Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©
    let messages = JSON.parse(localStorage.getItem('groupMessages')) || [];

    // 1. ÙˆØ¸ÙŠÙØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    function login() {
        const user = document.getElementById('usernameInput').value.trim();
        const pass = document.getElementById('passwordInput').value.trim();
        const error = document.getElementById('loginError');

        if (user === "") {
            error.innerText = "Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹";
            return;
        }

        if (pass === "1234") {
            localStorage.setItem('currentUser', user);
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('userNameHeader').innerText = "ğŸ‘¤ " + user;
            displayMessages();
        } else {
            error.innerText = "ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©! Ø¬Ø±Ø¨ (1234)";
        }
    }

    // 2. Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    function showSec(id, btn) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        btn.classList.add('active');
        if(id === 'chat-sec') displayMessages();
    }

    // 3. Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø´ÙˆØ± Ø¬Ø¯ÙŠØ¯
    function addPost() {
        const text = document.getElementById('postTxt').value;
        const imgFile = document.getElementById('postImg').files[0];
        const user = localStorage.getItem('currentUser') || 'Ù…Ø³ØªØ®Ø¯Ù…';
        
        if(!text && !imgFile) return;

        const post = document.createElement('div');
        post.className = 'card';
        let imgHtml = imgFile ? `<img src="${URL.createObjectURL(imgFile)}">` : "";
        
        post.innerHTML = `
            <div style="color:var(--fb-blue); font-weight:bold; margin-bottom:8px;">${user}</div>
            <div style="font-size:14px;">${text}</div>
            ${imgHtml}
            <div style="margin-top:10px; border-top:1px solid #eee; padding-top:8px; display:flex; gap:15px; color:#606770; font-size:13px;">
                <span>ğŸ‘ Ø£Ø¹Ø¬Ø¨Ù†ÙŠ</span> <span>ğŸ’¬ ØªØ¹Ù„ÙŠÙ‚</span>
            </div>
        `;
        document.getElementById('wall').prepend(post);
        document.getElementById('postTxt').value = "";
        document.getElementById('postImg').value = "";
    }

    // 4. Ø¥Ø¶Ø§ÙØ© ÙÙŠØ¯ÙŠÙˆ
    function addVideo() {
        const file = document.getElementById('vidInput').files[0];
        if(!file) return;
        const user = localStorage.getItem('currentUser') || 'Ù…Ø³ØªØ®Ø¯Ù…';
        const vidCard = document.createElement('div');
        vidCard.className = 'card';
        vidCard.innerHTML = `
            <div style="color:var(--fb-blue); font-weight:bold; margin-bottom:8px;">${user}</div>
            <video controls><source src="${URL.createObjectURL(file)}"></video>
        `;
        document.getElementById('video-feed').prepend(vidCard);
        document.getElementById('vidInput').value = "";
    }

    // 5. Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©
    function displayMessages() {
        const chatBox = document.getElementById('groupChatBox');
        const currentUser = localStorage.getItem('currentUser');
        chatBox.innerHTML = '';

        messages.forEach(msg => {
            const msgDiv = document.createElement('div');
            msgDiv.className = msg.user === currentUser ? 'msg sent' : 'msg received';
            msgDiv.innerHTML = `<span class="msg-user">${msg.user}</span>${msg.text}`;
            chatBox.appendChild(msgDiv);
        });
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function sendGroupMessage() {
        const input = document.getElementById('groupChatInput');
        const user = localStorage.getItem('currentUser');
        if (input.value.trim() === "") return;

        const newMsg = { user: user, text: input.value };
        messages.push(newMsg);
        localStorage.setItem('groupMessages', JSON.stringify(messages));
        input.value = "";
        displayMessages();
    }

    // ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
    window.onload = function() {
        const savedUser = localStorage.getItem('currentUser');
        if (savedUser) {
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('userNameHeader').innerText = "ğŸ‘¤ " + savedUser;
            displayMessages();
        }
    };
</script>

</body>
</html>
